let sanitize = (text) => {
    if (text && typeof text === "string") {
      return text.replace(/\s/g, '-').toLowerCase();
    }
      return text;
};

export const registerSettings = function() {
  // Register any custom module settings here
  console.log('syrin-play | Registering settings...')
  game.settings.register('syrin-play', 'syrinToken', {
    name: "Syrinscape Token",
    hint: "Syrinscape control panel token.",
    scope: 'world',
    config: true,
    default: "867-5309",
    type: String,
  });
}

export const getOrCreateFolder = async (rootId, folderName, entityName, folderColor, syrinToken) => {
    // try and get the folder
    const folder = await findFolder(rootId, folderName, entityName, folderColor);
    //console.log("Syrin folder: " + folder);
    if (folder) {
      // Folder already exists
      return folder._id;
    } else {
      const newFolder = await createFolder(rootId, folderName, entityName, folderColor);
      createJournalEntries(newFolder._id, "Curse of Strahd: Into the Mists", syrinToken, folderName);
      //createJournalEntries(newFolder._id, "Curse of Strahd: The Town of Vallaki part I");
      //createJournalEntries(newFolder._id, "Curse of Strahd: The Town of Vallaki part II");
      //createJournalEntries(newFolder._id, "Curse of Strahd: Village of Barovia I");
      //createJournalEntries(newFolder._id, "Curse of Strahd: Village of Barovia II");
      //createJournalEntries(newFolder._id, "Curse of Strahd: Random encounters in Barovia");
      return newFolder._id;
    }
};

export const findFolder = async (rootId, folderName, entityName, folderColor) => {
    // try and get the folder
    const folder = await game.folders.entities.find(
    (f) =>
        f.data.type === entityName &&
        f.data.name === folderName &&
        f.data.parent === rootId && 
        f.data.color === folderColor
    );
    return folder;
};

export const createFolder = async (rootId, folderName, entityName, folderColor) => {
    const folderExists = game.folder
    const folder = await Folder.create({
      name: folderName,
      type: entityName,
      color: folderColor,
      parent: rootId
    });
    return folder;
};

export const createJournalEntries = async (entryFolder, entryName, syrinToken, folderName) => {
  const entry = await JournalEntry.create({
      folder: entryFolder,
      name: entryName,
      img: null
  });
  //entry.importFromJSON('{"name": "Curse of Strahd: Into the Mists", "content": "<p><a href=\\"https://www.syrinscape.com/online/frontend-api/stop-all/?auth_token=' + syrinToken + '\\" title=\\"Stop ALL Sounds\\">Stop ALL Sounds</a></p>\\n<p><a title=\\"Plea for help\\" href=\\"https://www.syrinscape.com/online/frontend-api/moods/117018/play/?auth_token=' + syrinToken + '\\">Plea for help</a></p>", "img": null}');
  if (folderName === "Moods") {
    entry.importFromJSON('{"name": "Curse of Strahd: Into the Mists", "content": "<p><a href=\\"https://www.syrinscape.com/online/frontend-api/stop-all/?auth_token=' + syrinToken + '\\" title=\\"Stop ALL Sounds\\">Stop ALL Sounds</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117018/play?auth_token=' + syrinToken + '\\" title=\\"Plea for help\\">Plea for help</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117034/play?auth_token=' + syrinToken + '\\" title=\\"Arrigal enters\\">Arrigal enters</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117478/play?auth_token=' + syrinToken + '\\" title=\\"Tavern fight\\">Tavern fight</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117020/play?auth_token=' + syrinToken + '\\" title=\\"Duchess Morwens dinner\\">Duchess Morwens dinner</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117021/play?auth_token=' + syrinToken + '\\" title=\\"Camp outside of city\\">Camp outside of city</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117721/play?auth_token=' + syrinToken + '\\" title=\\"Stanimir fight\\">Stanimir fight</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117022/play?auth_token=' + syrinToken + '\\" title=\\"Dancing images in the fire\\">Dancing images in the fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117023/play?auth_token=' + syrinToken + '\\" title=\\"Werewolves in the mist (city)\\">Werewolves in the mist (city)</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/120881/play?auth_token=' + syrinToken + '\\" title=\\"Werewolves in the mist (hall)\\">Werewolves in the mist (hall)</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/120059/play?auth_token=' + syrinToken + '\\" title=\\"Welcome to Barovia\\">Welcome to Barovia</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/117024/play?auth_token=' + syrinToken + '\\" title=\\"Creeping fog\\">Creeping fog</a></p>", "img": null}');
  } else if (folderName === "Elements") {
    //entry.importFromJSON('{"name": "Curse of Strahd: Into the Mists", "content": "<p><a href=\\"https://www.syrinscape.com/online/frontend-api/stop-all/?auth_token=' + syrinToken + '\\" title=\\"Stop ALL Sounds\\">Stop ALL Sounds</a></p>\\n", "img": null}');
    //entry.importFromJSON('{"name": "Curse of Strahd: Into the Mists", "content": "<p><a href=\\"https://www.syrinscape.com/online/frontend-api/stop-all/?auth_token=' + syrinToken + '\\" title=\\"Stop ALL Sounds\\">Stop ALL Sounds</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627257/play?auth_token=' + syrinToken + '\\" title=\\"Bard music\\">Bard music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/630211/play?auth_token=' + syrinToken + '\\" title=\\"Music for Stanimir&apos;s tale\\">Music for Stanimir&apos;s tale</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/641507/play?auth_token=' + syrinToken + '\\" title=\\"Vistani music\\">Vistani music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627260/play?auth_token=' + syrinToken + '\\" title=\\"Foggy synths\\">Foggy synths</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629197/play?auth_token=' + syrinToken + '\\" title=\\"Banquet music\\">Banquet music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629239/play?auth_token=' + syrinToken + '\\" title=\\"Battle at the Gate music\\">Battle at the Gate music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647264/play?auth_token=' + syrinToken + '\\" title=\\"Traveling through  Barovia music\\">Traveling through  Barovia music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689966/play?auth_token=' + syrinToken + '\\" title=\\"Death House backing\\">Death House backing</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629233/play?auth_token=' + syrinToken + '\\" title=\\"Images in the fire\\">Images in the fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627261/play?auth_token=' + syrinToken + '\\" title=\\"Mead glasses clinking\\">Mead glasses clinking</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627262/play?auth_token=' + syrinToken + '\\" title=\\"Intense fire\\">Intense fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627263/play?auth_token=' + syrinToken + '\\" title=\\"Fireplace\\">Fireplace</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627264/play?auth_token=' + syrinToken + '\\" title=\\"Boots upstairs\\">Boots upstairs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627265/play?auth_token=' + syrinToken + '\\" title=\\"Raucous crowd\\">Raucous crowd</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627266/play?auth_token=' + syrinToken + '\\" title=\\"Burps and drink noises\\">Burps and drink noises</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627267/play?auth_token=' + syrinToken + '\\" title=\\"Chairs and tables\\">Chairs and tables</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627268/play?auth_token=' + syrinToken + '\\" title=\\"Coins and other stuff\\">Coins and other stuff</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627270/play?auth_token=' + syrinToken + '\\" title=\\"Creaking floorboards\\">Creaking floorboards</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627271/play?auth_token=' + syrinToken + '\\" title=\\"General hubbub\\">General hubbub</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629188/play?auth_token=' + syrinToken + '\\" title=\\"People chatting casually\\">People chatting casually</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629190/play?auth_token=' + syrinToken + '\\" title=\\"Party chatter\\">Party chatter</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629191/play?auth_token=' + syrinToken + '\\" title=\\"Banquet sounds\\">Banquet sounds</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629193/play?auth_token=' + syrinToken + '\\" title=\\"Giggling & laughing\\">Giggling & laughing</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629194/play?auth_token=' + syrinToken + '\\" title=\\"Hysterical outburst\\">Hysterical outburst</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629195/play?auth_token=' + syrinToken + '\\" title=\\"Babbling, coughing & burping\\">Babbling, coughing & burping</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629198/play?auth_token=' + syrinToken + '\\" title=\\"Svalich Woods night\\">Svalich Woods night</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629208/play?auth_token=' + syrinToken + '\\" title=\\"Babbling\\">Babbling</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629235/play?auth_token=' + syrinToken + '\\" title=\\"Fog background\\">Fog background</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629237/play?auth_token=' + syrinToken + '\\" title=\\"Ghostly fog\\">Ghostly fog</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629240/play?auth_token=' + syrinToken + '\\" title=\\"Crossbow attack\\">Crossbow attack</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629241/play?auth_token=' + syrinToken + '\\" title=\\"Barbarian sword fighters\\">Barbarian sword fighters</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629242/play?auth_token=' + syrinToken + '\\" title=\\"Red Charlotte sword fighter\\">Red Charlotte sword fighter</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629243/play?auth_token=' + syrinToken + '\\" title=\\"Taking damage\\">Taking damage</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629244/play?auth_token=' + syrinToken + '\\" title=\\"Spell fighting\\">Spell fighting</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629245/play?auth_token=' + syrinToken + '\\" title=\\"Swords clash whoosh\\">Swords clash whoosh</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/630207/play?auth_token=' + syrinToken + '\\" title=\\"Vistani fighters\\">Vistani fighters</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642956/play?auth_token=' + syrinToken + '\\" title=\\"Werewolf howls\\">Werewolf howls</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642957/play?auth_token=' + syrinToken + '\\" title=\\"Working townsfolk\\">Working townsfolk</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642958/play?auth_token=' + syrinToken + '\\" title=\\"Svalich Woods\\">Svalich Woods</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642960/play?auth_token=' + syrinToken + '\\" title=\\"Forest ambience\\">Forest ambience</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642961/play?auth_token=' + syrinToken + '\\" title=\\"Blacksmith\\">Blacksmith</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642962/play?auth_token=' + syrinToken + '\\" title=\\"Street noises\\">Street noises</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642964/play?auth_token=' + syrinToken + '\\" title=\\"River water lapping\\">River water lapping</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642966/play?auth_token=' + syrinToken + '\\" title=\\"Insect flybys\\">Insect flybys</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642967/play?auth_token=' + syrinToken + '\\" title=\\"Cracking and snapping wood\\">Cracking and snapping wood</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642968/play?auth_token=' + syrinToken + '\\" title=\\"Creaking trees\\">Creaking trees</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642969/play?auth_token=' + syrinToken + '\\" title=\\"Rain storm\\">Rain storm</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642970/play?auth_token=' + syrinToken + '\\" title=\\"Distant thunder\\">Distant thunder</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642971/play?auth_token=' + syrinToken + '\\" title=\\"Crows & ravens\\">Crows & ravens</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642972/play?auth_token=' + syrinToken + '\\" title=\\"Svalich Woods day\\">Svalich Woods day</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642973/play?auth_token=' + syrinToken + '\\" title=\\"Other wildlife\\">Other wildlife</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/642974/play?auth_token=' + syrinToken + '\\" title=\\"Tree wind\\">Tree wind</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647255/play?auth_token=' + syrinToken + '\\" title=\\"Werewolf chatter rapid\\">Werewolf chatter rapid</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647257/play?auth_token=' + syrinToken + '\\" title=\\"Inside the lighthouse\\">Inside the lighthouse</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647259/play?auth_token=' + syrinToken + '\\" title=\\"Council walla\\">Council walla</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647260/play?auth_token=' + syrinToken + '\\" title=\\"Walla\\">Walla</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647263/play?auth_token=' + syrinToken + '\\" title=\\"Werewolf chatter slower\\">Werewolf chatter slower</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/647267/play?auth_token=' + syrinToken + '\\" title=\\"Stanimir magic\\">Stanimir magic</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689954/play?auth_token=' + syrinToken + '\\" title=\\"Raucous crowd (delayed)\\">Raucous crowd (delayed)</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689955/play?auth_token=' + syrinToken + '\\" title=\\"General hubbub (delayed)\\">General hubbub (delayed)</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689962/play?auth_token=' + syrinToken + '\\" title=\\"Distant crows\\">Distant crows</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689963/play?auth_token=' + syrinToken + '\\" title=\\"Barovia House interior\\">Barovia House interior</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689964/play?auth_token=' + syrinToken + '\\" title=\\"Creaking house\\">Creaking house</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689965/play?auth_token=' + syrinToken + '\\" title=\\"Creaking wooden cabin\\">Creaking wooden cabin</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689967/play?auth_token=' + syrinToken + '\\" title=\\"Winds with a whistle\\">Winds with a whistle</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/689968/play?auth_token=' + syrinToken + '\\" title=\\"Horrible scratching\\">Horrible scratching</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/700910/play?auth_token=' + syrinToken + '\\" title=\\"Spooky stabs\\">Spooky stabs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627335/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I have been sent&quot; -  Arrigal\\">&quot;I have been sent&quot; -  Arrigal</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627336/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Take the west road&quot;\\">&quot;Take the west road&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627337/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Fill the glasses&quot;\\">&quot;Fill the glasses&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/627338/play?auth_token=' + syrinToken + '\\" title=\\"&quot;My name&quot;\\">&quot;My name&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629199/play?auth_token=' + syrinToken + '\\" title=\\"&quot;My master &quot;\\">&quot;My master &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629201/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Yes &quot;\\">&quot;Yes &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629203/play?auth_token=' + syrinToken + '\\" title=\\"&quot;No &quot;\\">&quot;No &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629202/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I don&apos;t understand&quot;\\">&quot;I don&apos;t understand&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629204/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I CAN&apos;T do that &quot;\\">&quot;I CAN&apos;T do that &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629205/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I can do that&quot;\\">&quot;I can do that&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629206/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Farewell&quot;\\">&quot;Farewell&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/629238/play?auth_token=' + syrinToken + '\\" title=\\"Battle stabs\\">Battle stabs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/630208/play?auth_token=' + syrinToken + '\\" title=\\"Spit on fire\\">Spit on fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/691778/play?auth_token=' + syrinToken + '\\" title=\\"Horror stabs\\">Horror stabs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/moods/839217/play?auth_token=' + syrinToken + '\\" title=\\"Heroes&apos; triumph\\">Heroes&apos; triumph</a></p>", "img": null}');
    entry.importFromJSON('{"name": "Curse of Strahd: Into the Mists", "content": "<p><a href=\\"https://www.syrinscape.com/online/frontend-api/stop-all/?auth_token=' + syrinToken + '\\" title=\\"Stop ALL Sounds\\">Stop ALL Sounds</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627257/play?auth_token=' + syrinToken + '\\" title=\\"Bard music\\">Bard music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/630211/play?auth_token=' + syrinToken + '\\" title=\\"Music for Stanimir&apos;s tale\\">Music for Stanimir&apos;s tale</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/641507/play?auth_token=' + syrinToken + '\\" title=\\"Vistani music\\">Vistani music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627260/play?auth_token=' + syrinToken + '\\" title=\\"Foggy synths\\">Foggy synths</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629197/play?auth_token=' + syrinToken + '\\" title=\\"Banquet music\\">Banquet music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629239/play?auth_token=' + syrinToken + '\\" title=\\"Battle at the Gate music\\">Battle at the Gate music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647264/play?auth_token=' + syrinToken + '\\" title=\\"Traveling through  Barovia music\\">Traveling through  Barovia music</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689966/play?auth_token=' + syrinToken + '\\" title=\\"Death House backing\\">Death House backing</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629233/play?auth_token=' + syrinToken + '\\" title=\\"Images in the fire\\">Images in the fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627261/play?auth_token=' + syrinToken + '\\" title=\\"Mead glasses clinking\\">Mead glasses clinking</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627262/play?auth_token=' + syrinToken + '\\" title=\\"Intense fire\\">Intense fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627263/play?auth_token=' + syrinToken + '\\" title=\\"Fireplace\\">Fireplace</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627264/play?auth_token=' + syrinToken + '\\" title=\\"Boots upstairs\\">Boots upstairs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627265/play?auth_token=' + syrinToken + '\\" title=\\"Raucous crowd\\">Raucous crowd</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627266/play?auth_token=' + syrinToken + '\\" title=\\"Burps and drink noises\\">Burps and drink noises</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627267/play?auth_token=' + syrinToken + '\\" title=\\"Chairs and tables\\">Chairs and tables</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627268/play?auth_token=' + syrinToken + '\\" title=\\"Coins and other stuff\\">Coins and other stuff</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627270/play?auth_token=' + syrinToken + '\\" title=\\"Creaking floorboards\\">Creaking floorboards</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627271/play?auth_token=' + syrinToken + '\\" title=\\"General hubbub\\">General hubbub</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629188/play?auth_token=' + syrinToken + '\\" title=\\"People chatting casually\\">People chatting casually</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629190/play?auth_token=' + syrinToken + '\\" title=\\"Party chatter\\">Party chatter</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629191/play?auth_token=' + syrinToken + '\\" title=\\"Banquet sounds\\">Banquet sounds</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629193/play?auth_token=' + syrinToken + '\\" title=\\"Giggling & laughing\\">Giggling & laughing</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629194/play?auth_token=' + syrinToken + '\\" title=\\"Hysterical outburst\\">Hysterical outburst</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629195/play?auth_token=' + syrinToken + '\\" title=\\"Babbling, coughing & burping\\">Babbling, coughing & burping</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629198/play?auth_token=' + syrinToken + '\\" title=\\"Svalich Woods night\\">Svalich Woods night</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629208/play?auth_token=' + syrinToken + '\\" title=\\"Babbling\\">Babbling</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629235/play?auth_token=' + syrinToken + '\\" title=\\"Fog background\\">Fog background</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629237/play?auth_token=' + syrinToken + '\\" title=\\"Ghostly fog\\">Ghostly fog</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629240/play?auth_token=' + syrinToken + '\\" title=\\"Crossbow attack\\">Crossbow attack</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629241/play?auth_token=' + syrinToken + '\\" title=\\"Barbarian sword fighters\\">Barbarian sword fighters</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629242/play?auth_token=' + syrinToken + '\\" title=\\"Red Charlotte sword fighter\\">Red Charlotte sword fighter</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629243/play?auth_token=' + syrinToken + '\\" title=\\"Taking damage\\">Taking damage</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629244/play?auth_token=' + syrinToken + '\\" title=\\"Spell fighting\\">Spell fighting</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629245/play?auth_token=' + syrinToken + '\\" title=\\"Swords clash whoosh\\">Swords clash whoosh</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/630207/play?auth_token=' + syrinToken + '\\" title=\\"Vistani fighters\\">Vistani fighters</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642956/play?auth_token=' + syrinToken + '\\" title=\\"Werewolf howls\\">Werewolf howls</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642957/play?auth_token=' + syrinToken + '\\" title=\\"Working townsfolk\\">Working townsfolk</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642958/play?auth_token=' + syrinToken + '\\" title=\\"Svalich Woods\\">Svalich Woods</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642960/play?auth_token=' + syrinToken + '\\" title=\\"Forest ambience\\">Forest ambience</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642961/play?auth_token=' + syrinToken + '\\" title=\\"Blacksmith\\">Blacksmith</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642962/play?auth_token=' + syrinToken + '\\" title=\\"Street noises\\">Street noises</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642964/play?auth_token=' + syrinToken + '\\" title=\\"River water lapping\\">River water lapping</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642966/play?auth_token=' + syrinToken + '\\" title=\\"Insect flybys\\">Insect flybys</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642967/play?auth_token=' + syrinToken + '\\" title=\\"Cracking and snapping wood\\">Cracking and snapping wood</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642968/play?auth_token=' + syrinToken + '\\" title=\\"Creaking trees\\">Creaking trees</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642969/play?auth_token=' + syrinToken + '\\" title=\\"Rain storm\\">Rain storm</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642970/play?auth_token=' + syrinToken + '\\" title=\\"Distant thunder\\">Distant thunder</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642971/play?auth_token=' + syrinToken + '\\" title=\\"Crows & ravens\\">Crows & ravens</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642972/play?auth_token=' + syrinToken + '\\" title=\\"Svalich Woods day\\">Svalich Woods day</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642973/play?auth_token=' + syrinToken + '\\" title=\\"Other wildlife\\">Other wildlife</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/642974/play?auth_token=' + syrinToken + '\\" title=\\"Tree wind\\">Tree wind</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647255/play?auth_token=' + syrinToken + '\\" title=\\"Werewolf chatter rapid\\">Werewolf chatter rapid</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647257/play?auth_token=' + syrinToken + '\\" title=\\"Inside the lighthouse\\">Inside the lighthouse</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647259/play?auth_token=' + syrinToken + '\\" title=\\"Council walla\\">Council walla</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647260/play?auth_token=' + syrinToken + '\\" title=\\"Walla\\">Walla</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647263/play?auth_token=' + syrinToken + '\\" title=\\"Werewolf chatter slower\\">Werewolf chatter slower</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/647267/play?auth_token=' + syrinToken + '\\" title=\\"Stanimir magic\\">Stanimir magic</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689954/play?auth_token=' + syrinToken + '\\" title=\\"Raucous crowd (delayed)\\">Raucous crowd (delayed)</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689955/play?auth_token=' + syrinToken + '\\" title=\\"General hubbub (delayed)\\">General hubbub (delayed)</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689962/play?auth_token=' + syrinToken + '\\" title=\\"Distant crows\\">Distant crows</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689963/play?auth_token=' + syrinToken + '\\" title=\\"Barovia House interior\\">Barovia House interior</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689964/play?auth_token=' + syrinToken + '\\" title=\\"Creaking house\\">Creaking house</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689965/play?auth_token=' + syrinToken + '\\" title=\\"Creaking wooden cabin\\">Creaking wooden cabin</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689967/play?auth_token=' + syrinToken + '\\" title=\\"Winds with a whistle\\">Winds with a whistle</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/689968/play?auth_token=' + syrinToken + '\\" title=\\"Horrible scratching\\">Horrible scratching</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/700910/play?auth_token=' + syrinToken + '\\" title=\\"Spooky stabs\\">Spooky stabs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627335/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I have been sent&quot; -  Arrigal\\">&quot;I have been sent&quot; -  Arrigal</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627336/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Take the west road&quot;\\">&quot;Take the west road&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627337/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Fill the glasses&quot;\\">&quot;Fill the glasses&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/627338/play?auth_token=' + syrinToken + '\\" title=\\"&quot;My name&quot;\\">&quot;My name&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629199/play?auth_token=' + syrinToken + '\\" title=\\"&quot;My master &quot;\\">&quot;My master &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629201/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Yes &quot;\\">&quot;Yes &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629203/play?auth_token=' + syrinToken + '\\" title=\\"&quot;No &quot;\\">&quot;No &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629202/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I don&apos;t understand&quot;\\">&quot;I don&apos;t understand&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629204/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I CAN&apos;T do that &quot;\\">&quot;I CAN&apos;T do that &quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629205/play?auth_token=' + syrinToken + '\\" title=\\"&quot;I can do that&quot;\\">&quot;I can do that&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629206/play?auth_token=' + syrinToken + '\\" title=\\"&quot;Farewell&quot;\\">&quot;Farewell&quot;</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/629238/play?auth_token=' + syrinToken + '\\" title=\\"Battle stabs\\">Battle stabs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/630208/play?auth_token=' + syrinToken + '\\" title=\\"Spit on fire\\">Spit on fire</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/691778/play?auth_token=' + syrinToken + '\\" title=\\"Horror stabs\\">Horror stabs</a></p>\\n<p><a href=\\"https://www.syrinscape.com/online/frontend-api/elements/839217/play?auth_token=' + syrinToken + '\\" title=\\"Heroes&apos; triumph\\">Heroes&apos; triumph</a></p>\\n", "img": null}');  
  }
};

export const createIfNotExists = async (settingName, compendiumType, compendiumLabel) => {
    const compendiumName = game.settings.get("syrin-play", settingName);
    console.log("Sryin compName: " + compendiumName);
    const compendium = await game.packs.find((pack) => pack.collection === compendiumName);
    if (compendium) {
      //logger/* default.info */.Z.info(`Compendium '${compendiumName}' found, will not create compendium.`);
      console.log("SYRIN Not creating compendium: " + compendiumName);
      return false;
    } else {
      //logger/* default.info */.Z.info(`Compendium '${compendiumName}' was not found, creating it now.`);
      const sanitizedLabel = sanitize(compendiumLabel);
      // create a compendium for the user
      await Compendium.create({
          entity: compendiumType,
          label: `SYRIN ${compendiumLabel}`,
          name: `syrin-${game.world.name}-${sanitizedLabel}`,
          package: "world"
      });
      await game.settings.set("syrin-play", settingName, `world.syrin-${game.world.name}-${sanitizedLabel}`);
      return true;
    }
};
